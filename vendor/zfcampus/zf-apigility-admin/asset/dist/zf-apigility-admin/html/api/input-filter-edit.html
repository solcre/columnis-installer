<div ng-controller="ApiServiceInputController">
    <div class="ag-new-input">
        <button class="btn btn-info pull-left" title="Help" ng-click="help()" data-toggle="modal" data-target="#inputHelp">
            <i class="glyphicon glyphicon-info-sign"></i>
        </button>

        <form class="form-inline pull-right">
            <div class="form-group">
                <input type="text" class="form-control input-xlarge" placeholder="Field name" ag-on-enter="addInput()" ng-model="newInput">
            </div>
            <button type="button" ng-click="addInput()" class="btn btn-sm btn-primary">Create New Field</button>
        </form>
    </div>
    <div class="ag-new-input clearfix"></div>

<form ag-form="">
    <div class="ag panel-group tooltip-api">
        <ag-collapse class="panel-success" ng-repeat="input in service.input_filter">
            <collapse-header>

                <h4 class="panel-title">
                    <i class="glyphicon glyphicon-tasks"></i>

                    <ag-edit-inplace name="input.name" validate="validateInputName(input.name, input)"></ag-edit-inplace>

                    <button type="button" class="btn btn-sm btn-danger pull-right" title="Remove field" collapse-button="" ng-click="removeInput($index)">
                        <i class="glyphicon glyphicon-trash"></i>
                    </button>
                </h4>

                <div class="clearfix"></div>
            </collapse-header>

            <collapse-body>
                <div class="panel-body">
                    <ng-include src="'html/api/input-edit.html'" onload="index = $index; input = input"></ng-include>
                </div>
            </collapse-body>
        </ag-collapse>
    </div>

    <div class="ag-new-input btn-group pull-right">
        <!-- todo Make the "cancel" action revert  -->
        <button type="button" class="btn btn-sm btn-default" ag-cancel-edit="">Cancel</button>
        <button type="submit" class="btn btn-sm btn-success" ng-click="saveInput()">Save Changes</button>
    </div>
</form>
</div>